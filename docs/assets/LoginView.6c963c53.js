import{_ as k,g as U,s as b}from"./index.8dc75c1d.js";import{a as x}from"./axios.d349c3b3.js";import{h as E,ag as i,o as S,c as R,X as e,R as o,a as n,V as m,aw as T,ax as L}from"./@vue.88ba4ddc.js";import"./geotiff.b2c33c96.js";import"./vue-router.1c4533a7.js";import"./ol.c3d2637f.js";import"./rbush.314566ea.js";import"./quickselect.bc77a5ac.js";import"./element-plus.7b496d94.js";import"./lodash-es.a286bec7.js";import"./@vueuse.8dbaa908.js";import"./@element-plus.eabea6f1.js";import"./@popperjs.36402333.js";import"./@ctrl.82a509e0.js";import"./dayjs.46f97078.js";import"./async-validator.fb49d0f5.js";import"./memoize-one.4ee5c96d.js";import"./escape-html.e5dfadb9.js";import"./normalize-wheel-es.8aeb3683.js";import"./@floating-ui.f14f28ca.js";import"./echarts.7885de64.js";import"./tslib.60310f1a.js";import"./zrender.6135380a.js";import"./form-data.d1f94bc2.js";const q="/favicon.ico";const B={data(){return{serverHostPort:E().appContext.config.globalProperties.$serverHostPort,activeName:"first",loginForm:{email:"",password:""},signupForm:{email:"",password:"",confirm:""},loginFormRules:{email:[{required:!0,message:"Please input email as username !",trigger:"blur"}],password:[{required:!0,message:"Please input password, which will be convert to hash code !",trigger:"blur"}]},signupFormRules:{email:[{required:!0,message:"Please input email as username !",trigger:"blur"}],password:[{required:!0,message:"Please input password, which will be convert to hash code !",trigger:"blur"}],confirm:[{required:!0,message:"Please input password again, which using confirm !",trigger:"blur"}]}}},mounted(){U("username")&&this.$router.push("/")},methods:{login(){this.loginForm.email==""||this.loginForm.password==""?this.$message({message:"Please input your email and password !",type:"warning"}):x.post(this.serverHostPort+"login",this.loginForm).then(s=>{s.data=="EmailError"?this.$message({message:"Please input username with email format contain @ !",type:"warning"}):s.data=="QueryError"?this.$message({message:"The database error when query form !",type:"warning"}):s.data=="ExistError"?this.$message({message:"The username/email or password not correct !",type:"warning"}):s.data=="AdminSuccess"?(this.$message({message:"Login success, welcome dear admin !",type:"success"}),b("username",this.loginForm.email,1e3*60),setTimeout(function(){this.$router.push("/admin")}.bind(this),1e3)):s.data=="UserSuccess"&&(this.$message({message:"Login success, welcome dear user !",type:"success"}),b("username",this.loginForm.email,1e3*60),setTimeout(function(){this.$router.push("/")}.bind(this),1e3))})},resetLoginForm(){this.loginForm.email="",this.loginForm.password=""},signup(){this.signupForm.email==""||this.signupForm.password==""||this.signupForm.confirm==""?this.$message({message:"Please input your email and password !",type:"warning"}):x.post(this.serverHostPort+"signup",this.signupForm).then(s=>{s.data=="EmailError"?this.$message({message:"Please input username with email format contain @ !",type:"warning"}):s.data=="PasswordError"?this.$message({message:"Please input password > 6 for more security !",type:"warning"}):s.data=="ConfirmError"?this.$message({message:"The password not equal confirm you inputed !",type:"warning"}):s.data=="ExistError"?this.$message({message:"The username/email already exist, please login !",type:"warning"}):s.data=="SignupSuccess"&&this.$message({message:"Signup success, please login !",type:"success"})})},resetSignupForm(){this.signupForm.email="",this.signupForm.password="",this.signupForm.confirm=""}}},g=s=>(T("data-v-73c5e8e9"),s=s(),L(),s),H={class:"loginBG"},N=g(()=>n("div",{class:"logo-circle"},[n("img",{src:q,style:{width:"80px","aspect-ratio":"true"}})],-1)),I=g(()=>n("br",null,null,-1)),X={style:{"text-align":"right","margin-top":"30px"}},M=g(()=>n("h5",null,"Copyright: Xiamen University",-1)),A={style:{"text-align":"right"}},G=g(()=>n("h5",null,"Copyright: Xiamen University",-1));function Q(s,l,j,z,t,d){const v=i("UserFilled"),a=i("el-icon"),p=i("el-input"),u=i("el-form-item"),f=i("Hide"),c=i("el-button"),_=i("el-divider"),h=i("BellFilled"),w=i("el-alert"),y=i("el-form"),F=i("el-tab-pane"),V=i("Message"),C=i("el-tabs"),P=i("el-card");return S(),R("div",H,[e(P,null,{default:o(()=>[N,e(C,{modelValue:t.activeName,"onUpdate:modelValue":l[5]||(l[5]=r=>t.activeName=r),class:"demo-tabs",onTabClick:s.handleClick},{default:o(()=>[e(F,{label:"Login",name:"first"},{default:o(()=>[e(y,{ref:"loginFormRef",model:t.loginForm,"status-icon":"",rules:t.loginFormRules,"label-width":"80px"},{default:o(()=>[e(u,{label:"Username",prop:"email"},{default:o(()=>[e(p,{modelValue:t.loginForm.email,"onUpdate:modelValue":l[0]||(l[0]=r=>t.loginForm.email=r),type:"text",placeholder:"example@xxx.edu.cn",autocomplete:"off",clearable:""},{suffix:o(()=>[e(a,null,{default:o(()=>[e(v)]),_:1})]),_:1},8,["modelValue"])]),_:1}),I,e(u,{label:"Password",prop:"password"},{default:o(()=>[e(p,{modelValue:t.loginForm.password,"onUpdate:modelValue":l[1]||(l[1]=r=>t.loginForm.password=r),type:"password",placeholder:"Password",autocomplete:"off",clearable:""},{suffix:o(()=>[e(a,null,{default:o(()=>[e(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),n("div",X,[e(c,{type:"primary",onClick:d.login,style:{color:"#000000"}},{default:o(()=>[m(" User Login ")]),_:1},8,["onClick"]),e(c,{type:"warning",onClick:d.resetLoginForm,style:{"text-algin":"right",color:"#000000"}},{default:o(()=>[m(" Form Reset ")]),_:1},8,["onClick"])]),e(_,{style:{"margin-top":"50px"}}),e(w,{type:"danger",closable:!1},{default:o(()=>[e(a,null,{default:o(()=>[e(h)]),_:1}),m(" Please register if you don't have an account yet! ")]),_:1}),M]),_:1},8,["model","rules"])]),_:1}),e(F,{label:"Signup",name:"second"},{default:o(()=>[e(y,{ref:"signupFormRef",model:t.signupForm,"status-icon":"",rules:t.signupFormRules,"label-width":"80px"},{default:o(()=>[e(u,{label:"Email",prop:"email"},{default:o(()=>[e(p,{modelValue:t.signupForm.email,"onUpdate:modelValue":l[2]||(l[2]=r=>t.signupForm.email=r),type:"email",placeholder:"example@xxx.edu.cn",autocomplete:"off",clearable:""},{suffix:o(()=>[e(a,null,{default:o(()=>[e(V)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Password",prop:"password"},{default:o(()=>[e(p,{modelValue:t.signupForm.password,"onUpdate:modelValue":l[3]||(l[3]=r=>t.signupForm.password=r),type:"password",placeholder:"Password",autocomplete:"off",clearable:""},{suffix:o(()=>[e(a,null,{default:o(()=>[e(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(u,{label:"Confirm",prop:"confirm"},{default:o(()=>[e(p,{modelValue:t.signupForm.confirm,"onUpdate:modelValue":l[4]||(l[4]=r=>t.signupForm.confirm=r),type:"password",placeholder:"Confirm",autocomplete:"off",clearable:""},{suffix:o(()=>[e(a,null,{default:o(()=>[e(f)]),_:1})]),_:1},8,["modelValue"])]),_:1}),n("div",A,[e(c,{type:"primary",onClick:d.signup,style:{color:"#000000"}},{default:o(()=>[m(" User Signup ")]),_:1},8,["onClick"]),e(c,{type:"warning",onClick:d.resetSignupForm,style:{"text-algin":"right",color:"#000000"}},{default:o(()=>[m(" Form Reset ")]),_:1},8,["onClick"])]),e(_,{style:{"margin-top":"50px"}}),e(w,{type:"danger",closable:!1},{default:o(()=>[e(a,null,{default:o(()=>[e(h)]),_:1}),m(" Please register if you don't have an account yet! ")]),_:1}),G]),_:1},8,["model","rules"])]),_:1})]),_:1},8,["modelValue","onTabClick"])]),_:1})])}const _e=k(B,[["render",Q],["__scopeId","data-v-73c5e8e9"]]);export{_e as default};
